"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,11295,13417,34271,34405,49047,49897,69185,86198,99127],{2627:(I,D,u)=>{var P;P=function(){const b={};let T;b.toggling=!1,b.init=function(g){T=$(g),T.on("change","input.checkbox-helper",L)},b.updateAll=function(){T.find("input.checkbox-helper").each((g,h)=>{b.updateState($(h))})},b.updateState=function(g){if(b.toggling)return;const h=g.closest("tr").find("input:not([disabled]):visible").toArray(),i=$(h.shift()),f=h.length&&h.every(C=>C.checked);i.prop("checked",f)};function L(g){const h=$(g.target);k(h)}function k(g){b.toggling=!0;const h=g.prop("checked");g.closest("tr").find("input:not(.checkbox-helper):visible").each((i,f)=>{const C=$(f);C.prop("checked")!==h&&C.click()}),b.toggling=!1}return b}.call(D,u,D,I),P!==void 0&&(I.exports=P)},34405:(I,D,u)=>{var P,b;P=[u(49897),u(29930),u(36e3),u(9787),u(35786)],b=function(T,L,{Textcomplete:k},{TextareaEditor:g},{ContenteditableEditor:h}){const i={},f={delay:200,appendTo:null};i.init=d=>{const t={...f,...d},{input:l,onSelect:r}=t;app.loadJQueryUI(function(){l.autocomplete({...t,open:function(){$(this).autocomplete("widget").css("z-index",100005)},select:function(s,a){C(l,r,s,a)}})})},i.user=function(d,t,l){typeof t=="function"&&(l=t,t={}),t=t||{},i.init({input:d,onSelect:l,source:(r,s)=>{t.query=r.term,T.get("/api/users",t,function(a,m){if(a)return L.error(a);if(m&&m.users){const p=m.users.map(function(w){const A=$("<div></div>").html(w.username).text();return w&&{label:A,value:A,user:{uid:w.uid,name:w.username,slug:w.userslug,username:w.username,userslug:w.userslug,displayname:w.displayname,picture:w.picture,banned:w.banned,"icon:text":w["icon:text"],"icon:bgColor":w["icon:bgColor"]}}});s(p)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.group=function(d,t){i.init({input:d,onSelect:t,source:(l,r)=>{socket.emit("groups.search",{query:l.term},function(s,a){if(s)return L.error(s);if(a&&a.length){const m=a.map(function(p){return p&&{label:p.name,value:p.name,group:p}});r(m)}$(".ui-autocomplete a").attr("data-ajaxify","false")})}})},i.tag=function(d,t){i.init({input:d,onSelect:t,delay:100,source:(l,r)=>{socket.emit("topics.autocompleteTags",{query:l.term,cid:ajaxify.data.cid||0},function(s,a){if(s)return L.error(s);a&&r(a),$(".ui-autocomplete a").attr("data-ajaxify","false")})}})};function C(d,t,l,r){t=t||function(){};const s=jQuery.Event("keypress");s.which=13,s.keyCode=13,setTimeout(function(){d.trigger(s)},100),t(l,r)}return i.setup=function({element:d,strategies:t,options:l}){const r=d.get(0);if(r){var s;if(r.nodeName==="TEXTAREA"||r.nodeName==="INPUT"?s=new g(r):r.nodeName==="DIV"&&r.getAttribute("contenteditable")==="true"&&(s=new h(r)),!s)throw new Error("unknown target element type");r.setAttribute("dir",document.querySelector("html").getAttribute("data-dir"));var a=new k(s,t,{dropdown:l});return a.on("rendered",function(){a.dropdown.items.length&&a.dropdown.items[0].activate()}),a}},i}.apply(D,P),b!==void 0&&(I.exports=b)},49897:(I,D,u)=>{u.r(D),u.d(D,{del:()=>l,get:()=>i,head:()=>f,patch:()=>d,post:()=>C,put:()=>t});var P=u(91749),b=u.n(P),T=u(33530),L=u.n(T);const k=config.relative_path+"/api/v3";async function g(r,s){if(r.url=r.url.startsWith("/api")?config.relative_path+r.url:k+r.url,typeof s=="function"){h(r).then(a=>s(null,a),a=>{let m=a;a instanceof Error||(m=new Error(String(a)));const p=m.message||String(m);if(p&&!p.startsWith("[[error:")&&(p.toLowerCase()==="fetch failed"||p.toLowerCase()==="failed to fetch"||p.toLowerCase().includes("networkerror")||p.toLowerCase().includes("network")&&p.toLowerCase().includes("failed"))){const A=new Error("[[error:no-connection]]");A.originalError=m,m=A}s(m)});return}try{return await h(r)}catch(a){if(a.message==="A valid login session was not found. Please log in and try again."){const{url:m}=await(0,P.fire)("filter:admin.reauth",{url:"login"});return(0,T.confirm)("[[error:api.reauth-required]]",p=>{p&&ajaxify.go(m)})}throw a}}async function h(r){const{url:s}=r;delete r.url,r.headers||(r.headers={}),r.data&&!(r.data instanceof FormData)&&(r.data=JSON.stringify(r.data||{}),r.headers["content-type"]="application/json; charset=utf-8");try{({options:r}=await(0,P.fire)("filter:api.options",{options:r}))}catch(x){console.error("[API] Error in filter:api.options hook:",x)}r.data&&(r.body=r.data,delete r.data);let a;try{a=await fetch(s,r)}catch(x){const N=x.message||x.toString()||String(x),j=x.name||"Error";if(j==="TypeError"&&(N.toLowerCase().includes("fetch")||N.toLowerCase().includes("network")||N.toLowerCase().includes("failed to fetch")||N.toLowerCase().includes("load failed"))||N.toLowerCase().includes("cors")||N.toLowerCase().includes("networkerror")){console.error("[API] Network error:",{url:s,method:r.method||"GET",error:N,name:j});const n=new Error("[[error:no-connection]]");throw n.originalError=x,n}throw console.error("[API] Unexpected fetch error:",{url:s,method:r.method||"GET",error:N,name:j}),x}const{headers:m}=a;if(m.get("x-redirect"))return h({url:m.get("x-redirect"),...r});const p=m.get("content-type"),w=p&&p.startsWith("application/json");let A;if(r.method!=="HEAD")try{w?A=await a.json():A=await a.text()}catch(x){throw console.error("[API] Error parsing response:",{url:s,status:a.status,statusText:a.statusText,contentType:p,error:x.message}),new Error("[[error:invalid-json]]")}if(!a.ok){let x;throw A?w&&A.status&&A.status.message?x=A.status.message:typeof A=="string"?x=A:x=a.statusText||"Request failed":x=a.statusText||"Request failed",new Error(x)}return w&&A&&A.hasOwnProperty("status")&&A.hasOwnProperty("response")?A.response:A}function i(r,s,a){return g({url:r+(s&&Object.keys(s).length?"?"+$.param(s):"")},a)}function f(r,s,a){return g({url:r+(s&&Object.keys(s).length?"?"+$.param(s):""),method:"HEAD"},a)}function C(r,s,a){return g({url:r,method:"POST",data:s,headers:{"x-csrf-token":config.csrf_token}},a)}function d(r,s,a){return g({url:r,method:"PATCH",data:s,headers:{"x-csrf-token":config.csrf_token}},a)}function t(r,s,a){return g({url:r,method:"PUT",data:s,headers:{"x-csrf-token":config.csrf_token}},a)}function l(r,s,a){return g({url:r,method:"DELETE",data:s,headers:{"x-csrf-token":config.csrf_token}},a)}},63431:(I,D,u)=>{var P,b;P=[u(49897),u(34405),u(33530),u(29930),u(17459),u(65348),u(6411),u(2627),u(54222)],b=function(T,L,k,g,h,i,f,C,d){const t={};let l;t.init=function(){l=isNaN(parseInt(ajaxify.data.selectedCategory.cid,10))?"admin":ajaxify.data.selectedCategory.cid,C.init(".privilege-table-container"),i.init($('[component="category-selector"]'),{onSelect:function(n){l=parseInt(n.cid,10),l=isNaN(l)?"admin":l,t.refreshPrivilegeTable(),ajaxify.updateHistory("admin/manage/privileges/"+(l||""))},localCategories:ajaxify.data.categories,privilege:"find",showLinks:!0}),t.setupPrivilegeTable(),w(),$(".privilege-filters button:first-child").click()},t.setupPrivilegeTable=function(){$(".privilege-table-container").on("change",'input[type="checkbox"]:not(.checkbox-helper)',function(){const n=this,e=$(this),o=e.parents("[data-privilege]"),c=o.index()+1,y=o.attr("data-privilege"),v=e.prop("checked"),E=e.parents("tr"),S=E.attr("data-group-name")||E.attr("data-uid"),R=parseInt(E.attr("data-private")||0,10),U=E.attr("data-group-name")!==void 0,B=U&&E.attr("data-group-name")==="banned-users"||E.attr("data-banned")!==void 0?"banned-users":"registered-users",F=e.prop("checked")===(o.attr("data-value")==="true")?null:v;S?(U&&y==="groups:moderate"&&!R&&v?k.confirm("[[admin/manage/privileges:alert.confirm-moderate]]",function(O){O?(o.attr("data-delta",F),t.applyDeltaState(n,F),t.exposeSingleAssumedPriv(c,B)):e.prop("checked",!e.prop("checked"))}):y.endsWith("admin:admins-mods")&&v?k.confirm("[[admin/manage/privileges:alert.confirm-admins-mods]]",function(O){O?(o.attr("data-delta",F),t.applyDeltaState(n,F),t.exposeSingleAssumedPriv(c,B)):e.prop("checked",!e.prop("checked"))}):(o.attr("data-delta",F),t.applyDeltaState(n,F),t.exposeSingleAssumedPriv(c,B)),C.updateState(e)):g.error("[[error:invalid-data]]")}),t.exposeAssumedPrivileges(),C.updateAll(),t.addEvents()},t.applyDeltaState=(n,e)=>{["bg-success","bg-opacity-75","border-success"].forEach(o=>{n.classList.toggle(o,e===!0)}),["bg-danger","bg-opacity-50","border-danger"].forEach(o=>{n.classList.toggle(o,e===!1)})},t.addEvents=function(){document.getElementById("save").addEventListener("click",function(){o("save",t.commit)}),document.getElementById("discard").addEventListener("click",function(){o("discard",t.discard)});const n=document.querySelector(".privilege-table-container");n.addEventListener("change",c=>{c.target.closest("td[data-privilege] input")&&(document.getElementById("discard").style.display=n.querySelectorAll("td[data-delta]").length?"unset":"none")});const e=$(".privilege-table-container");e.on("click",'[data-action="search.user"]',t.addUserToPrivilegeTable),e.on("click",'[data-action="search.group"]',t.addGroupToPrivilegeTable),e.on("click",'[data-action="copyToChildren"]',function(){o("copyToChildren",t.copyPrivilegesToChildren.bind(null,l,""))}),e.on("click",'[data-action="copyToChildrenGroup"]',function(){const c=$(this).parents("[data-group-name]").attr("data-group-name");o("copyToChildrenGroup",t.copyPrivilegesToChildren.bind(null,l,c))}),e.on("click",'[data-action="copyPrivilegesFrom"]',function(){t.copyPrivilegesFromCategory(l,"")}),e.on("click",'[data-action="copyPrivilegesFromGroup"]',function(){const c=$(this).parents("[data-group-name]").attr("data-group-name");t.copyPrivilegesFromCategory(l,c)}),e.on("click",'[data-action="copyToAll"]',function(){o("copyToAll",t.copyPrivilegesToAllCategories.bind(null,l,""))}),e.on("click",'[data-action="copyToAllGroup"]',function(){const c=$(this).parents("[data-group-name]").attr("data-group-name");o("copyToAllGroup",t.copyPrivilegesToAllCategories.bind(null,l,c))}),e.on("click",".privilege-filters button",N),f.bind("ctrl+s",function(c){o("save",t.commit),c.preventDefault()});function o(c,y){const v=M();k.confirm(`[[admin/manage/privileges:alert.confirm-${c}, ${v}]]<br /><br />[[admin/manage/privileges:alert.no-undo]]`,function(E){E&&y.call()})}},t.commit=function(){const n=document.querySelector(".privilege-table-container"),e=$.map(n.querySelectorAll("td[data-delta]"),function(o){const c=o.getAttribute("data-privilege"),y=o.parentNode,v=y.getAttribute("data-group-name")||y.getAttribute("data-uid"),E=o.getAttribute("data-delta")==="true"?1:0;return t.setPrivilege(v,c,E)});Promise.allSettled(e).then(o=>{t.refreshPrivilegeTable();const c=o.filter(y=>y.status==="rejected");c.length?c.forEach(y=>{g.error(y.reason)}):d.toggleSaveSuccess($("#save"))})},t.discard=function(){t.refreshPrivilegeTable(),g.success("[[admin/manage/privileges:alert.discarded]]")},t.refreshPrivilegeTable=function(n){T.get(`/categories/${l}/privileges`,{}).then(e=>{ajaxify.data.privileges={...ajaxify.data.privileges,...e};const o=parseInt(l,10)?"admin/partials/privileges/category":"admin/partials/privileges/global",c=ajaxify.currentPage.endsWith("admin/manage/privileges/admin");app.parseAndTranslate(o,{cid:l,privileges:e,isAdminPriv:c}).then(y=>{const v=$(".privilege-filters button.btn-warning").map((E,S)=>$(S).index()).get();$(".privilege-table-container").html(y),t.exposeAssumedPrivileges(),document.querySelectorAll(".privilege-filters").forEach((E,S)=>{const R=v[S]===void 0?0:v[S];E.querySelectorAll("button")[R].click()}),p("data-group-name",n)})}).catch(alert.error)},t.exposeAssumedPrivileges=function(){const n=(y,v)=>`.privilege-table tr[data-banned] td[data-privilege="${y[v]}"] input`,e=r("banned-users");a(e,n);const o=(y,v)=>`.privilege-table tr[data-group-name]:not([data-group-name="registered-users"],[data-group-name="banned-users"],[data-group-name="guests"],[data-group-name="spiders"],[data-group-name="fediverse"]) td[data-privilege="${y[v]}"] input, .privilege-table tr[data-uid]:not([data-banned]) td[data-privilege="${y[v]}"] input`,c=r("registered-users");a(c,o)},t.exposeSingleAssumedPriv=function(n,e){let o;switch(e){case"banned-users":o=()=>`.privilege-table tr[data-banned] td[data-privilege]:nth-child(${n}) input`;break;default:o=()=>`.privilege-table tr[data-group-name]:not([data-group-name="registered-users"],[data-group-name="banned-users"],[data-group-name="guests"],[data-group-name="spiders"],[data-group-name="fediverse"]) td[data-privilege]:nth-child(${n}) input, .privilege-table tr[data-uid]:not([data-banned]) td[data-privilege]:nth-child(${n}) input`}const c=s(e,n);m(o,c)},t.setPrivilege=(n,e,o)=>T[o?"put":"del"](`/categories/${isNaN(l)?0:l}/privileges/${encodeURIComponent(e)}`,{member:n}),t.addUserToPrivilegeTable=function(){const n=k.dialog({title:"[[admin/manage/categories:alert.find-user]]",message:'<input class="form-control input-lg" placeholder="[[admin/manage/categories:alert.user-search]]" />',show:!0});n.on("shown.bs.modal",function(){const e=n.find("input");e.focus(),L.user(e,function(o,c){x(c.item.user,function(){n.modal("hide")})})})},t.addGroupToPrivilegeTable=function(){const n=k.dialog({title:"[[admin/manage/categories:alert.find-group]]",message:'<input class="form-control input-lg" placeholder="[[admin/manage/categories:alert.group-search]]" />',show:!0});n.on("shown.bs.modal",function(){const e=n.find("input");e.focus(),L.group(e,function(o,c){if(c.item.group.name==="administrators")return g.alert({type:"warning",message:"[[admin/manage/privileges:alert.admin-warning]]"});A(c.item.group.name,function(){n.modal("hide")})})})},t.copyPrivilegesToChildren=function(n,e){const o=j();socket.emit("admin.categories.copyPrivilegesToChildren",{cid:n,group:e,filter:o},function(c){if(c)return g.error(c.message);g.success("[[admin/manage/categories:privileges.copy-success]]")})},t.copyPrivilegesFromCategory=function(n,e){const o=M(),c="<br>"+(e?`[[admin/manage/privileges:alert.copyPrivilegesFromGroup-warning, ${o}]]`:`[[admin/manage/privileges:alert.copyPrivilegesFrom-warning, ${o}]]`)+"<br><br>[[admin/manage/privileges:alert.no-undo]]";i.modal({title:"[[admin/manage/privileges:alert.copyPrivilegesFrom-title]]",message:c,localCategories:[],showLinks:!0,onSubmit:function(y){socket.emit("admin.categories.copyPrivilegesFrom",{toCid:n,filter:j(),fromCid:y.cid,group:e},function(v){if(v)return g.error(v);ajaxify.refresh()})}})},t.copyPrivilegesToAllCategories=function(n,e){const o=j();socket.emit("admin.categories.copyPrivilegesToAllCategories",{cid:n,group:e,filter:o},function(c){if(c)return g.error(c);g.success("[[admin/manage/categories:privileges.copy-success]]")})};function r(n){const e=[];return $(`.privilege-table tr[data-group-name="${n}"] td input[type="checkbox"]:not(.checkbox-helper)`).parents("[data-privilege]").each(function(o,c){$(c).find("input").prop("checked")&&e.push(c.getAttribute("data-privilege"))}),e.concat(e.map(function(o){return o.startsWith("groups:")?o.slice(7):!1})).filter(Boolean)}function s(n,e){return $(`.privilege-table tr[data-group-name="${n}"] td:nth-child(${e}) input[type="checkbox"]`)[0].checked}function a(n,e){for(let o=0,c=n.length;o<c;o+=1)$(e(n,o)).each(function(v,E){E.checked||(E.indeterminate=!0)})}function m(n,e){$(n()).each((c,y)=>{y.indeterminate=y.checked?!1:e})}function p(n,e){if(e){const o=$("["+n+"]").filter(function(){return $(this).attr(n)===String(e)});if(o.length)return o.addClass("selected"),!0}return!1}function w(){if(ajaxify.data.group){if(p("data-group-name",ajaxify.data.group))return;A(ajaxify.data.group)}}function A(n,e){if(e=e||function(){},document.querySelector('.privilege-table [data-group-name="'+n+'"]'))return p("data-group-name",n),e();const c={},y=ajaxify.data.privileges.keys.groups.reduce(function(v,E,S){return v[E]=!1,c[E]=ajaxify.data.privileges.labelData[S].type,v},{});app.parseAndTranslate("admin/partials/privileges/"+(isNaN(l)||l===0?"global":"category"),"privileges.groups",{privileges:{groups:[{name:n,nameEscaped:h.escape(n),privileges:y,types:c}]}},function(v){const E=document.querySelector(".privilege-table tbody"),S=$(".privilege-filters").first().find("button.btn-warning").index();E.append(v.get(0)),t.exposeAssumedPrivileges(),p("data-group-name",n),S>=0&&document.querySelector(".privilege-filters").querySelectorAll("button")[S].click(),e()})}async function x(n,e){if(e=e||function(){},document.querySelector('.privilege-table [data-uid="'+n.uid+'"]'))return p("data-uid",n.uid),e();const c={},y=ajaxify.data.privileges.keys.users.reduce(function(R,U,W){return R[U]=!1,c[U]=ajaxify.data.privileges.labelData[W].type,R},{}),v=await app.parseAndTranslate("admin/partials/privileges/"+(isNaN(l)?"global":"category"),"privileges.users",{privileges:{users:[{picture:n.picture,username:n.username,banned:n.banned,uid:n.uid,"icon:text":n["icon:text"],"icon:bgColor":n["icon:bgColor"],privileges:y,types:c}]}}),E=document.querySelectorAll(".privilege-table tbody"),S=$(".privilege-filters").last().find("button.btn-warning").index();E[1].append(v.get(0)),t.exposeAssumedPrivileges(),p("data-uid",n.uid),S>=0&&document.querySelectorAll(".privilege-filters")[1].querySelectorAll("button")[S].click(),e()}function N(n){const e=$(n.target),o=e.attr("data-filter");e.closest("table").find("thead tr:last-child, tbody tr").each((y,v)=>{$(v).find("[data-type]").addClass("hidden"),$(v).find(`[data-type="${o}"]`).removeClass("hidden")}),C.updateAll(),e.siblings("button").removeClass("btn-warning"),e.addClass("btn-warning")}function j(){return $('[component="privileges/groups/filters"] .btn-warning').attr("data-filter")}function M(){const n=document.querySelector(".privilege-filters .btn-warning"),e=n?n.textContent.toLocaleLowerCase():"";return e.indexOf("privileges")>-1?e:`${e} privileges`.trim()}return t}.apply(D,P),b!==void 0&&(I.exports=b)},65348:(I,D,u)=>{var P,b;P=[u(96349),u(33530),u(91749),u(17459)],b=function(T,L,k,g){const h={};return h.init=function(i,f){if(!i||!i.length)return;f=f||{};const C=f.onSelect||function(){};f.states=f.states||["watching","tracking","notwatching","ignoring"],f.template=f.template||"partials/category/selector-dropdown-left",k.fire("action:category.selector.options",{el:i,options:f}),T.init(i,f);const d={el:i,selectedCategory:null};i.on("click","[data-cid]",function(){const l=$(this);return l.hasClass("disabled")?!1:(d.selectCategory(l.attr("data-cid")),C(d.selectedCategory))});let t=d.el.find('[component="category-selector-selected"]').html();return g.translate(t,l=>{t=l}),d.selectCategory=function(l){const r=d.el.find('[data-cid="'+l+'"]');d.selectedCategory={cid:l,name:r.attr("data-name")},r.length?d.el.find('[component="category-selector-selected"]').html(r.find('[component="category-markup"]').html()):d.el.find('[component="category-selector-selected"]').html(t)},d.getSelectedCategory=function(){return d.selectedCategory},d.getSelectedCid=function(){return d.selectedCategory?d.selectedCategory.cid:0},f.hasOwnProperty("selectedCategory")&&app.parseAndTranslate(f.template,{selectedCategory:f.selectedCategory},function(l){d.el.find('[component="category-selector-selected"]').html(l.find('[component="category-selector-selected"]').html())}),d},h.modal=function(i){i=i||{},i.onSelect=i.onSelect||function(){},i.onSubmit=i.onSubmit||function(){},app.parseAndTranslate("admin/partials/categories/select-category",{message:i.message},function(f){const C=L.dialog({title:i.title||"[[modules:composer.select-category]]",message:f,buttons:{save:{label:"[[global:select]]",className:"btn-primary",callback:t}}}),d=h.init(C.find('[component="category-selector"]'),i);function t(l){return l.preventDefault(),d.selectedCategory&&(i.onSubmit(d.selectedCategory),C.modal("hide")),!1}i.openOnLoad&&C.on("shown.bs.modal",function(){C.find(".dropdown-toggle").dropdown("toggle")}),C.find("form").on("submit",t)})},h}.apply(D,P),b!==void 0&&(I.exports=b)},96349:(I,D,u)=>{var P,b;P=[u(29930),u(89336),u(49897)],b=function(T,L,k){const g={};return g.init=function(h,i){let f=i.defaultCategories||null;i=i||{},i.privilege=i.privilege||"topics:read",i.states=i.states||["watching","tracking","notwatching","ignoring"],i.cacheList=i.hasOwnProperty("cacheList")?i.cacheList:!0;let C=[];Array.isArray(i.localCategories)&&(C=i.localCategories.map(s=>({...s})),f&&(f=[...C,...f])),i.selectedCids=i.selectedCids||ajaxify.data.selectedCids||[];const d=h.find('[component="category-selector-search"]');if(!d.length)return;const t=d.parents('[component="category/dropdown"]').length>0||d.parents('[component="category-selector"]').length>0;h.on("show.bs.dropdown",function(){t&&d.removeClass("hidden");function s(){const a=d.find("input").val();a.length>1||!a&&!f?l(a,function(m){f=i.cacheList&&(f||m),r(m)}):!a&&f&&r(f)}d.on("click",function(a){a.preventDefault(),a.stopPropagation()}),d.find("input").val("").on("keyup",utils.debounce(s,300)),s()}),h.on("shown.bs.dropdown",function(){["xs","sm"].includes(utils.findBootstrapEnvironment())||d.find("input").focus()}),h.on("hide.bs.dropdown",function(){t&&d.addClass("hidden"),d.off("click"),d.find("input").off("keyup")});function l(s,a){k.get("/search/categories",{search:s,query:utils.params(),parentCid:i.parentCid||0,selectedCids:i.selectedCids,privilege:i.privilege,states:i.states,showLinks:i.showLinks},function(m,{categories:p}){if(m)return T.error(m);a(C.concat(p))})}function r(s){const a=i.selectedCids.map(String);s.forEach(function(m){m.selected=a.includes(String(m.cid))}),app.parseAndTranslate(i.template,{categoryItems:s.slice(0,200),selectedCategory:ajaxify.data.selectedCategory,allCategoriesUrl:ajaxify.data.allCategoriesUrl},function(m){h.find('[component="category/list"]').html(m.find('[component="category/list"]').html()),h.find('[component="category/list"] [component="category/no-matches"]').toggleClass("hidden",!!s.length);const p=L.Dropdown.getInstance(h.find(".dropdown-toggle").get(0));p&&p.update()})}},g}.apply(D,P),b!==void 0&&(I.exports=b)}}]);
