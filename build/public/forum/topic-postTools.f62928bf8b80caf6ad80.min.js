"use strict";(self.webpackChunknodebb=self.webpackChunknodebb||[]).push([[1091,15794,21374,25432,34271,49897,57490,63154,99127],{8454:(N,U,s)=>{var C,b;C=[s(24962),s(96352),s(52473),s(17459),s(34342),s(49897),s(33530),s(29930),s(91749),s(30076)],b=function(k,S,P,A,E,x,R,r,p,T){const M={};let c=!1;M.init=function(i){c=!1,h(),m(i),k.addShareHandlers(ajaxify.data.titleRaw),E.addVoteHandler(),M.updatePostCount(ajaxify.data.postcount)};function h(){document.querySelector('[component="topic"]')&&$('[component="topic"]').on("show.bs.dropdown",'[component="post/tools"]',function(){const o=$(this),t=o.find(".dropdown-menu"),{top:e}=this.getBoundingClientRect();if(o.toggleClass("dropup",e>window.innerHeight/2),t.attr("data-loaded"))return;t.html(T.generatePlaceholderWave([3,5,9,7,10,"divider",10]));const n=o.parents("[data-pid]"),a=n.attr("data-pid"),y=parseInt(n.attr("data-index"),10);socket.emit("posts.loadPostTools",{pid:a},async(l,w)=>{if(l)return r.error(l);w.posts.display_move_tools=w.posts.display_move_tools&&y!==0;const D=await app.parseAndTranslate("partials/topic/post-menu-list",w),I=s(57576);t.attr("data-loaded","true").html(D),new I("[data-clipboard-text]"),p.fire("action:post.tools.load",{element:t})})})}M.toggle=function(i,o){const t=P.get("post","pid",i);t.find('[component="post/quote"], [component="post/bookmark"], [component="post/reply"], [component="post/flag"], [component="user/chat"]').toggleClass("hidden",o),t.find('[component="post/delete"]').toggleClass("hidden",o).parent().attr("hidden",o?"":null),t.find('[component="post/restore"]').toggleClass("hidden",!o).parent().attr("hidden",o?null:""),t.find('[component="post/purge"]').toggleClass("hidden",!o).parent().attr("hidden",o?null:""),M.removeMenu(t)},M.removeMenu=function(i){i.find('[component="post/tools"] .dropdown-menu').removeAttr("data-loaded").html("")},M.updatePostCount=function(i){P.get("topic/post-count").attr("title",i).html(T.humanReadableNumber(i)),S.setCount(i)};function m(i){const o=P.get("topic");G(),o.on("click",'[component="post/quote"]',function(){g($(this),i)}),o.on("click",'[component="post/reply"]',function(){f($(this),i)}),$(".topic").on("click",'[component="topic/reply"]',function(e){e.preventDefault(),f($(this),i)}),$(".topic").on("click",'[component="topic/reply-as-topic"]',function(){A.translate(`[[topic:link-back, ${ajaxify.data.titleRaw}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(e){p.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:e})})}),o.on("click",'[component="post/bookmark"]',function(){return u($(this),d($(this),"data-pid"))}),o.on("click",'[component="post/pin"]',function(){const e=d($(this),"data-pid");return x.put(`/posts/${encodeURIComponent(e)}/pin`,void 0,function(n){if(n)return r.error(n);p.fire("action:post.pinned",{pid:e})}),!1}),o.on("click",'[component="post/unpin"]',function(){const e=d($(this),"data-pid");return x.del(`/posts/${encodeURIComponent(e)}/pin`,void 0,function(n){if(n)return r.error(n);p.fire("action:post.unpinned",{pid:e})}),!1}),o.on("click",'[component="post/upvote"]',function(){return E.toggleVote($(this),".upvoted",1)}),o.on("click",'[component="post/downvote"]',function(){return E.toggleVote($(this),".downvoted",-1)}),o.on("click",'[component="post/vote-count"]',function(){E.showVotes(d($(this),"data-pid"))}),o.on("click",'[component="post/announce-count"]',function(){E.showAnnouncers(d($(this),"data-pid"))}),o.on("click",'[component="post/flag"]',function(){const e=d($(this),"data-pid");s.e(6574).then(function(){var n=[s(6574)];(function(a){a.showFlagModal({type:"post",id:e})}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/already-flagged"]',function(){const e=$(this).data("flag-id");s.e(6574).then(function(){var n=[s(6574)];(function(a){R.confirm("[[flags:modal-confirm-rescind]]",function(y){y&&a.rescind(e)})}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/flagUser"]',function(){const e=d($(this),"data-uid");s.e(6574).then(function(){var n=[s(6574)];(function(a){a.showFlagModal({type:"user",id:e})}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/flagResolve"]',function(){const e=$(this).attr("data-flagId");s.e(6574).then(function(){var n=[s(6574)];(function(a){a.resolve(e)}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/edit"]',function(){const e=$(this),n=parseInt(d(e,"data-timestamp"),10),a=parseInt(ajaxify.data.postEditDuration,10);t(a,n,"post-edit-duration-expired")&&p.fire("action:composer.post.edit",{pid:d(e,"data-pid")})}),config.enablePostHistory&&ajaxify.data.privileges["posts:history"]&&o.on("click",'[component="post/view-history"], [component="post/edit-indicator"]',function(){const e=$(this);s.e(92747).then(function(){var n=[s(92747)];(function(a){a.open(d(e,"data-pid"))}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/delete"]',function(){const e=$(this),n=parseInt(d(e,"data-timestamp"),10),a=parseInt(ajaxify.data.postDeleteDuration,10);t(a,n,"post-delete-duration-expired")&&j($(this))});function t(e,n,a){if(!ajaxify.data.privileges.isAdminOrMod&&e&&Date.now()-n>e*1e3){const y=Math.floor(e/86400),l=Math.floor(e%86400/3600),w=Math.floor(e%86400%3600/60),D=e%86400%3600%60;let I="[[error:"+a+", "+e+"]]";return y?l?I="[[error:"+a+"-days-hours, "+y+", "+l+"]]":I="[[error:"+a+"-days, "+y+"]]":l?w?I="[[error:"+a+"-hours-minutes, "+l+", "+w+"]]":I="[[error:"+a+"-hours, "+l+"]]":w&&(D?I="[[error:"+a+"-minutes-seconds, "+w+", "+D+"]]":I="[[error:"+a+"-minutes, "+w+"]]"),r.error(I),!1}return!0}o.on("click",'[component="post/restore"]',function(){j($(this))}),o.on("click",'[component="post/purge"]',function(){L($(this))}),o.on("click",'[component="post/move"]',function(){const e=$(this);s.e(90677).then(function(){var n=[s(90677)];(function(a){a.init(e.parents("[data-pid]"))}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/change-owner"]',function(){const e=$(this);Promise.all([s.e(20056),s.e(17205)]).then(function(){var n=[s(17205)];(function(a){a.init(e.parents("[data-pid]"))}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/manage-editors"]',function(){const e=$(this);Promise.all([s.e(20056),s.e(24459)]).then(function(){var n=[s(24459)];(function(a){a.init(e.parents("[data-pid]"))}).apply(null,n)}).catch(s.oe)}),o.on("click",'[component="post/resolved"]',function(){const e=$(this),n=d(e,"data-pid"),y=!(e.attr("data-resolved")==="true");x.put(`/posts/${n}/resolved`,{resolved:y}).then(()=>{e.attr("data-resolved",y);const l=e.find('[component="post/resolved/icon"]'),w=e.find('[component="post/resolved/text"]');y?(l.removeClass("fa-question-circle text-warning").addClass("fa-check-circle text-success"),w.text("Mark as Unresolved")):(l.removeClass("fa-check-circle text-success").addClass("fa-question-circle text-warning"),w.text("Mark as Resolved")),r.success(y?"Marked as resolved":"Marked as unresolved")}).catch(r.error)}),o.on("click",'[component="post/ban-ip"]',function(){const e=$(this).attr("data-ip");socket.emit("blacklist.addRule",e,function(n){if(n)return r.error(n);r.success("[[admin/manage/blacklist:ban-ip]]")})}),o.on("click",'[component="post/chat"]',function(){Q($(this))})}async function f(i,o){const t=await v();V(async function(){let e=await W(i);(d(i,"data-uid")==="0"||!d(i,"data-userslug"))&&(e="");const n=i.is('[component="post/reply"]')?d(i,"data-pid"):null,a=!n||!t.pid||n===t.pid;t.text&&a?(e=e||t.username,p.fire("action:composer.addQuote",{tid:o,pid:n,title:ajaxify.data.titleRaw,username:e,body:t.text,selectedPid:t.pid})):p.fire("action:composer.post.new",{tid:o,pid:n,title:ajaxify.data.titleRaw,body:e?e+" ":$('[component="topic/quickreply/text"]').val()||""})})}async function g(i,o){const t=await v();V(async function(){const e=await W(i),n=d(i,"data-pid");function a(l){p.fire("action:composer.addQuote",{tid:o,pid:n,username:e,title:ajaxify.data.titleRaw,text:l})}if(t.text&&n&&n===t.pid)return a(t.text);const{content:y}=await x.get(`/posts/${encodeURIComponent(n)}/raw`);a(y)})}async function v(){let i="",o,t="";const e=window.getSelection?window.getSelection():document.selection.createRange(),n=$('[component="post"] [component="post/content"]');let a;return n.each(function(y,l){e&&e.containsNode&&l&&e.containsNode(l,!0)&&(a=l)}),a&&e&&(i=e.toString(),o=$(a).parents('[component="post"]').attr("data-pid"),t=await W($(a))),{text:i,pid:o,username:t}}function u(i,o){const t=i.attr("data-bookmarked")==="false"?"put":"del";return x[t](`/posts/${encodeURIComponent(o)}/bookmark`,void 0,function(e){if(e)return r.error(e);const n=t==="put"?"bookmark":"unbookmark";p.fire(`action:post.${n}`,{pid:o})}),!1}function d(i,o){return i.parents("[data-pid]").attr(o)}function W(i){return new Promise(o=>{let t="";if(i.attr("component")==="topic/reply"){o(t);return}const e=i.parents("[data-pid]");if(e.length&&!e.hasClass("self-post")){Promise.all([s.e(53050),s.e(26174)]).then(function(){var n=[s(13230)];(function(a){t=a(e.attr("data-username"),!0),t||(e.attr("data-uid")!=="0"?t="[[global:former-user]]":t="[[global:guest]]"),t&&t!=="[[global:former-user]]"&&t!=="[[global:guest]]"&&(t="@"+t),o(t)}).apply(null,n)}).catch(s.oe);return}o(t)})}function j(i){const o=d(i,"data-pid"),e=P.get("post","pid",o).hasClass("deleted")?"restore":"delete";K(e,o)}function L(i){K("purge",d(i,"data-pid"))}async function K(i,o){({action:i}=await p.fire(`static:post.${i}`,{action:i,pid:o})),i&&R.confirm("[[topic:post-"+i+"-confirm]]",function(t){if(!t)return;const e=i==="purge"?"":"/state";x[i==="restore"?"put":"del"](`/posts/${encodeURIComponent(o)}${e}`).catch(r.error)})}function Q(i){const o=i.parents("[data-pid]");return s.e(92619).then(function(){var t=[s(92619)];(function(e){e.newChat(o.attr("data-uid"))}).apply(null,t)}).catch(s.oe),i.parents(".btn-group").find(".dropdown-toggle").click(),!1}function V(i){if(!parseInt(ajaxify.data.topicStaleDays,10))return i();const t=Math.min(Date.now()-1e3*60*60*24*ajaxify.data.topicStaleDays,864e13);if(c||ajaxify.data.lastposttime>=t)return i();R.dialog({title:"[[topic:stale.title]]",message:"[[topic:stale.warning]]",buttons:{reply:{label:"[[topic:stale.reply-anyway]]",className:"btn-link",callback:function(){c=!0,i()}},create:{label:"[[topic:stale.create]]",className:"btn-primary",callback:function(){A.translate(`[[topic:link-back, ${ajaxify.data.title}, ${config.relative_path}/topic/${ajaxify.data.slug}]]`,function(n){p.fire("action:composer.topic.new",{cid:ajaxify.data.cid,body:n,fromStaleTopic:!0})})}}}}).modal()}const Y=utils.debounce(J,250);function G(){ajaxify.data.privileges["topics:reply"]&&(p.onPage("action:posts.loaded",z),$(document).off("selectionchange"),$(document).on("selectionchange",function(){window.getSelection().toString()===""&&$('[component="selection/tooltip"]').addClass("hidden")}),$(document).on("selectionchange",Y))}function J(){window.getSelection().toString()===""||z()}async function z(){let i=$('[component="selection/tooltip"]');if(i.addClass("hidden"),i.attr("data-ajaxify")==="1"){i.remove();return}const o=window.getSelection();if(o.focusNode&&o.type==="Range"&&ajaxify.data.template.topic){const t=$(o.focusNode),e=$(o.anchorNode),n=e.parents("[data-pid]").attr("data-pid"),a=t.parents("[data-pid]").attr("data-pid");if(n!==a||!t.parents('[component="post/content"]').length||!e.parents('[component="post/content"]').length)return;const y=t.parents("[data-pid]"),l=o.getRangeAt(0);if(!y.length||l.collapsed)return;const w=l.getClientRects(),D=w[w.length-1];i.length||(i=await app.parseAndTranslate("partials/topic/selection-tooltip",ajaxify.data),$('[component="selection/tooltip"]').remove(),i.addClass("hidden").appendTo("body")),i.off("click").on("click",'[component="selection/tooltip/quote"]',function(){i.addClass("hidden"),g(y.find('[component="post/quote"]'),ajaxify.data.tid)}),i.removeClass("hidden"),$(window).one("action:ajaxify.start",function(){i.attr("data-ajaxify",1).addClass("hidden"),$(document).off("selectionchange",Y)});const I=i.outerWidth(!0);i.css({top:D.bottom+$(window).scrollTop(),left:I>D.width?D.left:D.left+D.width-I})}}function F(){if(ajaxify.data&&ajaxify.data.category)if(ajaxify.data.category.name.replace(/&amp;/g,"&")==="Comments & Feedback"){$(".resolved-tools").show();const o=$('[component="topic/resolved"]');if(o.length){const t=o.attr("data-resolved")==="true",e=o.find('[component="topic/resolved/icon"]'),n=o.find('[component="topic/resolved/text"]');t?(e.removeClass("fa-question-circle text-warning").addClass("fa-check-circle text-success"),n.text("Mark as Unresolved")):(e.removeClass("fa-check-circle text-success").addClass("fa-question-circle text-warning"),n.text("Mark as Resolved"))}else setTimeout(F,100)}else $(".resolved-tools").hide()}return $(document).ready(F),$(window).on("action:ajaxify.end",F),$(document).on("click",'[component="topic/resolved"]',function(){const i=$(this),o=ajaxify.data.mainPid,e=!(i.attr("data-resolved")==="true");x.put(`/posts/${o}/resolved`,{resolved:e}).then(()=>{i.attr("data-resolved",e);const n=i.find('[component="topic/resolved/icon"]'),a=i.find('[component="topic/resolved/text"]');e?(n.removeClass("fa-question-circle text-warning").addClass("fa-check-circle text-success"),a.text("Mark as Unresolved")):(n.removeClass("fa-check-circle text-success").addClass("fa-question-circle text-warning"),a.text("Mark as Resolved")),r.success(e?"Marked as resolved":"Marked as unresolved")}).catch(r.error)}),M}.apply(U,C),b!==void 0&&(N.exports=b)},24962:(N,U,s)=>{var C,b;C=[s(91749)],b=function(k){const S={},P=window.location.protocol+"//"+window.location.host;S.addShareHandlers=function(x){function R(r,p,T,M){return window.open(r,"_blank","width="+T+",height="+M+",scrollbars=no,status=no"),k.fire("action:share.open",{url:r,urlToPost:p}),!1}$("#content").off("shown.bs.dropdown",".share-dropdown").on("shown.bs.dropdown",".share-dropdown",function(){const r=$(this).find(".post-link");r.val(P+E($(this))),setTimeout(function(){r.putCursorAtEnd().select()},50)}),A(".post-link",function(r){return r.preventDefault(),!1}),A('[component="share/twitter"]',function(){const r=E($(this)),p=`https://twitter.com/intent/tweet?text=${encodeURIComponent(x)}&url=${encodeURIComponent(r)}`;return R(p,r,550,420)}),A('[component="share/facebook"]',function(){const r=E($(this)),p=`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(r)}`;return R(p,r,626,436)}),A('[component="share/whatsapp"]',function(){const r=E($(this)),p=encodeURIComponent(x)+" - "+encodeURIComponent(r),T=config.useragent.isMobile?`whatsapp://send?text=${p}`:`https://wa.me/?text=${p}`;return R(T,r,626,436)}),A('[component="share/telegram"]',function(){const r=E($(this)),p=`https://t.me/share/url?text=${encodeURIComponent(x)}&url=${encodeURIComponent(r)}`;return R(p,r,626,436)}),A('[component="share/linkedin"]',function(){const r=E($(this)),p=`https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(r)}`;return R(p,r,626,436)}),k.fire("action:share.addHandlers",{openShare:R})};function A(x,R){$("#content").off("click",x).on("click",x,R)}function E(x){const R=parseInt(x.parents("[data-pid]").attr("data-pid"),10),r="/post"+(R?"/"+R:"");return P+config.relative_path+r}return S}.apply(U,C),b!==void 0&&(N.exports=b)},29869:N=>{N.exports=function(U,s,C){s.setGlobal("true",!0),s.setGlobal("false",!1);const b=24*60*60*1e3,k={displayMenuItem:P,buildMetaTag:A,buildLinkTag:E,stringify:x,escape:R,stripTags:r,buildCategoryIcon:p,buildCategoryLabel:T,generateCategoryBackground:M,generateChildrenCategories:c,generateTopicClass:h,membershipBtn:m,spawnPrivilegeStates:f,localeToHTML:g,renderTopicImage:v,renderDigestAvatar:u,userAgentIcons:d,buildAvatar:W,increment:j,generateWroteReplied:L,generateRepliedTo:K,generateWrote:Q,encodeURIComponent:V,isoTimeToLocaleString:Y,shouldHideReplyContainer:G,humanReadableNumber:J,formattedNumber:z,txEscape:F,generatePlaceholderWave:i,register:o,__escape:S};function S(t){return t}function P(t,e){const n=t.navigation[e];return!(!n||n.route.match("/users")&&t.user&&!t.user.privileges["view:users"]||n.route.match("/tags")&&t.user&&!t.user.privileges["view:tags"]||n.route.match("/groups")&&t.user&&!t.user.privileges["view:groups"])}function A(t){const e=t.name?'name="'+t.name+'" ':"",n=t.property?'property="'+t.property+'" ':"",a=t.content?'content="'+t.content.replace(/\n/g," ")+'" ':"";return"<meta "+e+n+a+`/>
	`}function E(t){const e=["link","rel","as","type","href","sizes","title","crossorigin"],[n,a,y,l,w,D,I,H]=e.map(B=>t[B]?`${B}="${t[B]}" `:"");return"<link "+n+a+y+l+D+I+w+H+`/>
	`}function x(t){return JSON.stringify(t).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/g,"&quot;")}function R(t){return U.escapeHTML(t)}function r(t){return U.stripHTMLTags(t)}function p(t,e,n){return t?`<span class="icon d-inline-flex justify-content-center align-items-center align-middle ${n}" style="${M(t)} width:${e}; height: ${e}; font-size: ${parseInt(e,10)/2}px;">${t.icon?`<i class="fa fa-fw ${t.icon}"></i>`:""}</span>`:""}function T(t,e="a",n=""){if(!t)return"";const a=e==="a"?`href="${C}/category/${t.slug}"`:"";return`<${e} ${a} class="badge px-1 text-truncate text-decoration-none ${n}" style="color: ${t.color};background-color: ${t.bgColor};border-color: ${t.bgColor}!important; max-width: 70vw;">
			${t.icon&&t.icon!=="fa-nbb-none"?`<i class="fa fa-fw ${t.icon}"></i>`:""}
			${t.name}
		</${e}>`}function M(t){if(!t)return"";const e=[];return t.bgColor&&(e.push("background-color: "+t.bgColor),e.push(`border-color: ${t.bgColor}!important`)),t.color&&e.push("color: "+t.color),t.backgroundImage&&(e.push("background-image: url("+t.backgroundImage+")"),t.imageClass&&e.push("background-size: "+t.imageClass)),e.join("; ")+";"}function c(t){let e="";return!t||!t.children||!t.children.length||(t.children.forEach(function(n){if(n&&!n.isSection){const a=n.link?n.link:C+"/category/"+n.slug;e+='<span class="category-children-item float-start"><div role="presentation" class="icon float-start" style="'+M(n)+'"><i class="fa fa-fw '+n.icon+'"></i></div><a href="'+a+'"><small>'+n.name+"</small></a></span>"}}),e=e&&'<span class="category-children">'+e+"</span>"),e}function h(t){return["locked","pinned","deleted","unread","scheduled"].filter(n=>!!t[n]).join(" ")}function m(t,e=""){return t.isMember&&t.name!=="administrators"?`<button class="btn btn-danger ${e}" data-action="leave" data-group="${t.displayName}" ${t.disableLeave?" disabled":""}><i class="fa fa-times"></i> [[groups:membership.leave-group]]</button>`:t.isPending&&t.name!=="administrators"?`<button class="btn btn-warning disabled ${e}"><i class="fa fa-clock-o"></i> [[groups:membership.invitation-pending]]</button>`:t.isInvited?`<button class="btn btn-warning" data-action="rejectInvite" data-group="${t.displayName}">[[groups:membership.reject]]</button><button class="btn btn-success" data-action="acceptInvite" data-group="${t.name}"><i class="fa fa-plus"></i> [[groups:membership.accept-invitation]]</button>`:!t.disableJoinRequests&&t.name!=="administrators"?`<button class="btn btn-success ${e}" data-action="join" data-group="${t.displayName}"><i class="fa fa-plus"></i> [[groups:membership.join-group]]</button>`:""}function f(t,e,n,a){const y=[];for(const[l,w]of Object.entries(n))y.push({name:l,state:w,type:a[l]});return y.map(function(l){const w=["groups:moderate","groups:posts:upvote","groups:posts:downvote","groups:local:login","groups:group:create"],D=["groups:find","groups:read","groups:topics:read","groups:view:users","groups:view:tags","groups:view:groups"],I=["groups:moderate"];let H=["groups:view:users","groups:find","groups:read","groups:topics:read","groups:topics:create","groups:topics:reply","groups:topics:tag","groups:posts:edit","groups:posts:history","groups:posts:delete","groups:posts:upvote","groups:posts:downvote","groups:topics:delete"];t===-1&&(H=H.slice(3));const B=e==="guests"&&(w.includes(l.name)||l.name.startsWith("groups:admin:"))||e==="spiders"&&!D.includes(l.name)||e==="fediverse"&&!H.includes(l.name)||e==="Global Moderators"&&I.includes(l.name);return`
				<td data-privilege="${l.name}" data-value="${l.state}" data-type="${l.type}">
					<div class="form-check text-center">
						<input class="form-check-input float-none${B?' d-none"':""}" autocomplete="off" type="checkbox"${l.state?" checked":""}${B?' disabled="disabled" aria-diabled="true"':""} />
					</div>
				</td>
			`}).join("")}function g(t,e){return t=t||e||"en-GB",t.replace("_","-")}function v(t){return t.thumb?'<img src="'+t.thumb+'" class="img-circle user-img" title="'+t.user.displayname+'" />':'<img component="user/picture" data-uid="'+t.user.uid+'" src="'+t.user.picture+'" class="user-img" title="'+t.user.displayname+'" />'}function u(t){return t.teaser?t.teaser.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.teaser.user.picture+'" title="'+t.teaser.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.teaser.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.teaser.user["icon:text"]+"</div>":t.user.picture?'<img style="vertical-align: middle; width: 32px; height: 32px; border-radius: 50%;" src="'+t.user.picture+'" title="'+t.user.username+'" />':'<div style="vertical-align: middle; width: 32px; height: 32px; line-height: 32px; font-size: 16px; background-color: '+t.user["icon:bgColor"]+'; color: white; text-align: center; display: inline-block; border-radius: 50%;">'+t.user["icon:text"]+"</div>"}function d(t){let e="";switch(t.platform){case"Linux":e+='<i class="fa fa-fw fa-linux"></i>';break;case"Microsoft Windows":e+='<i class="fa fa-fw fa-windows"></i>';break;case"Apple Mac":e+='<i class="fa fa-fw fa-apple"></i>';break;case"Android":e+='<i class="fa fa-fw fa-android"></i>';break;case"iPad":e+='<i class="fa fa-fw fa-tablet"></i>';break;case"iPod":case"iPhone":e+='<i class="fa fa-fw fa-mobile"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}switch(t.browser){case"Chrome":e+='<i class="fa fa-fw fa-chrome"></i>';break;case"Firefox":e+='<i class="fa fa-fw fa-firefox"></i>';break;case"Safari":e+='<i class="fa fa-fw fa-safari"></i>';break;case"IE":e+='<i class="fa fa-fw fa-internet-explorer"></i>';break;case"Edge":e+='<i class="fa fa-fw fa-edge"></i>';break;default:e+='<i class="fa fa-fw fa-question-circle"></i>';break}return e}function W(t,e,n,a,y){t||(t=this),a=a||"";const l=new Map([["title",t.displayname],["data-uid",t.uid],["class",`avatar ${a}${n?" avatar-rounded":""}`]]),w=[`--avatar-size: ${e};`],D=H=>Array.from(H).reduce((B,[X,Z])=>(B+=` ${X}="${Z}"`,B),"");let I="";return t.picture&&(I+=`<img${D(l)} alt="${t.displayname}" loading="lazy" component="${y||"avatar/picture"}" src="${t.picture}" style="${w.join(" ")}" onError="this.remove()" itemprop="image" />`),I+=`<span${D(l)} component="${y||"avatar/icon"}" style="${w.join(" ")} background-color: ${t["icon:bgColor"]}">${t["icon:text"]}</span>`,I}function j(t,e){return String(t+parseInt(e,10))}function L(t,e){return t.toPid?K(t,e):Q(t,e)}function K(t,e){const n=t.parent&&t.parent.displayname?t.parent.displayname:"[[global:guest]]";return`[[topic:replied-to-user-${t.timestamp<Date.now()-e*b?"on":"ago"}, ${t.toPid}, ${C}/post/${encodeURIComponent(t.toPid)}, ${n}, ${C}/post/${encodeURIComponent(t.pid)}, ${t.timestampISO}]]`}function Q(t,e){return`[[topic:wrote-${t.timestamp<Date.now()-e*b?"on":"ago"}, ${C}/post/${encodeURIComponent(t.pid)}, ${t.timestampISO}]]`}function V(t){return encodeURIComponent(t)}function Y(t,e="en-GB"){return new Date(t).toLocaleString([e],{dateStyle:"short",timeStyle:"short"}).replace(/,/g,"&#44;")}function G(t){return!!(t.replies.count<=0||t.replies.hasSingleImmediateReply)}function J(t,e=1){return U.makeNumberHumanReadable(t,e)}function z(t){return U.addCommas(t)}function F(t){return String(t).replace(/%/g,"&#37;").replace(/,/g,"&#44;")}function i(t){return t.map(n=>n==="divider"?'<li class="dropdown-divider"></li>':`
			<li class="dropdown-item placeholder-wave">
				<div class="placeholder" style="width: 20px;"></div>
				<div class="placeholder col-${n}"></div>
			</li>`).join("")}function o(){Object.keys(k).forEach(function(t){s.registerHelper(t,k[t])})}return k}},30076:(N,U,s)=>{var C,b;const k=s(29869);C=[s(77918),s(81335)],b=function(S,P){return k(S,P,config.relative_path)}.apply(U,C),b!==void 0&&(N.exports=b)},34342:(N,U,s)=>{var C,b;C=[s(52473),s(17459),s(49897),s(91749),s(33530),s(29930),s(89336)],b=function(k,S,P,A,E,x,R){const r={};let p={};r.addVoteHandler=function(){p={},T()&&(k.get("topic").on("mouseenter",'[data-pid] [component="post/vote-count"]',h),k.get("topic").on("mouseleave",'[data-pid] [component="post/vote-count"]',c)),k.get("topic").on("mouseenter",'[data-pid] [component="post/announce-count"]',h),k.get("topic").on("mouseleave",'[data-pid] [component="post/announce-count"]',c)};function T(){const{upvoteVisibility:f,privileges:g}=ajaxify.data;return g.isAdminOrMod||f==="all"||f==="loggedin"&&config.loggedIn}function M(){const{upvoteVisibility:f,downvoteVisibility:g,privileges:v}=ajaxify.data;return v.isAdminOrMod||f==="all"||g==="all"||(f==="loggedin"||g==="loggedin")&&config.loggedIn}function c(){const f=$(this),g=f.parents("[data-pid]").attr("data-pid"),v=R.Tooltip.getInstance(this);v&&(v.dispose(),f.attr("title","")),p[g]=!1}function h(){const f=$(this),v=f.parent().parents("[data-pid]").attr("data-pid");p[v]=!0;const u=R.Tooltip.getInstance(this);u&&(u.dispose(),f.attr("title",""));const d=f.attr("component")==="post/vote-count"?`/posts/${encodeURIComponent(v)}/upvoters`:`/posts/${encodeURIComponent(v)}/announcers/tooltip`;P.get(d,{},function(W,j){if(W)return x.error(W);p[v]&&j&&m(f,j)})}function m(f,g){function v(d){f.attr("title",d),new R.Tooltip(f,{container:"#content",html:!0}).show()}let u=g.usernames.filter(d=>d!=="[[global:former-user]]");u.length&&(u.length+g.otherCount>g.cutoff?(u=u.join(", ").replace(/,/g,"|"),S.translate("[[topic:users-and-others, "+u+", "+g.otherCount+"]]",function(d){d=d.replace(/\|/g,","),v(d)})):(u=u.join(", "),v(u)))}return r.toggleVote=function(f,g,v){const u=f.closest("[data-pid]"),W=u.find(g).length?"del":"put",j=u.attr("data-pid");return P[W](`/posts/${encodeURIComponent(j)}/vote`,{delta:v},function(L){if(L){if(!app.user.uid){ajaxify.go("login");return}return x.error(L)}A.fire("action:post.toggleVote",{pid:j,delta:v,unvote:W==="del"})}),!1},r.showVotes=function(f){M()&&P.get(`/posts/${encodeURIComponent(f)}/voters`,{},function(g,v){if(g)return x.error(g);app.parseAndTranslate("modals/votes",v,function(u){const d=E.dialog({title:"[[global:voters]]",message:u,className:"vote-modal",show:!0,onEscape:!0,backdrop:!0});d.on("click",function(){d.modal("hide")})})})},r.showAnnouncers=async function(f){const g=await P.get(`/posts/${encodeURIComponent(f)}/announcers`,{}).catch(d=>x.error(d)),v=await app.parseAndTranslate("modals/announcers",g),u=E.dialog({title:`[[topic:announcers-x, ${g.announceCount}]]`,message:v,className:"announce-modal",show:!0,onEscape:!0,backdrop:!0});u.on("click",function(){u.modal("hide")})},r}.apply(U,C),b!==void 0&&(N.exports=b)},49897:(N,U,s)=>{s.r(U),s.d(U,{del:()=>M,get:()=>x,head:()=>R,patch:()=>p,post:()=>r,put:()=>T});var C=s(91749),b=s.n(C),k=s(33530),S=s.n(k);const P=config.relative_path+"/api/v3";async function A(c,h){if(c.url=c.url.startsWith("/api")?config.relative_path+c.url:P+c.url,typeof h=="function"){E(c).then(m=>h(null,m),m=>h(m));return}try{return await E(c)}catch(m){if(m.message==="A valid login session was not found. Please log in and try again."){const{url:f}=await(0,C.fire)("filter:admin.reauth",{url:"login"});return(0,k.confirm)("[[error:api.reauth-required]]",g=>{g&&ajaxify.go(f)})}throw m}}async function E(c){const{url:h}=c;delete c.url,c.data&&!(c.data instanceof FormData)&&(c.data=JSON.stringify(c.data||{}),c.headers["content-type"]="application/json; charset=utf-8"),{options:c}=await(0,C.fire)("filter:api.options",{options:c}),c.data&&(c.body=c.data,delete c.data);const m=await fetch(h,c),{headers:f}=m;if(f.get("x-redirect"))return E({url:f.get("x-redirect"),...c});const g=f.get("content-type"),v=g&&g.startsWith("application/json");let u;if(c.method!=="HEAD"&&(v?u=await m.json():u=await m.text()),!m.ok)throw u?new Error(v?u.status.message:u):new Error(m.statusText);return v&&u&&u.hasOwnProperty("status")&&u.hasOwnProperty("response")?u.response:u}function x(c,h,m){return A({url:c+(h&&Object.keys(h).length?"?"+$.param(h):"")},m)}function R(c,h,m){return A({url:c+(h&&Object.keys(h).length?"?"+$.param(h):""),method:"HEAD"},m)}function r(c,h,m){return A({url:c,method:"POST",data:h,headers:{"x-csrf-token":config.csrf_token}},m)}function p(c,h,m){return A({url:c,method:"PATCH",data:h,headers:{"x-csrf-token":config.csrf_token}},m)}function T(c,h,m){return A({url:c,method:"PUT",data:h,headers:{"x-csrf-token":config.csrf_token}},m)}function M(c,h,m){return A({url:c,method:"DELETE",data:h,headers:{"x-csrf-token":config.csrf_token}},m)}}}]);
